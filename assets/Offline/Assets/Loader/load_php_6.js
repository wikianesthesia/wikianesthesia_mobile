mw.loader.implement("ext.visualEditor.mwgallery@1iqd2",function($,jQuery,require,module){ve.ce.MWGalleryCaptionNode=function VeCeMWGalleryCaptionNode(){ve.ce.MWGalleryCaptionNode.super.apply(this,arguments);this.$element.addClass('gallerycaption');};OO.inheritClass(ve.ce.MWGalleryCaptionNode,ve.ce.BranchNode);ve.ce.MWGalleryCaptionNode.static.name='mwGalleryCaption';ve.ce.MWGalleryCaptionNode.static.tagName='li';ve.ce.nodeFactory.register(ve.ce.MWGalleryCaptionNode);ve.ce.MWGalleryImageCaptionNode=function VeCeMWGalleryImageCaptionNode(){ve.ce.MWGalleryImageCaptionNode.super.apply(this,arguments);this.$element.addClass('gallerytext');};OO.inheritClass(ve.ce.MWGalleryImageCaptionNode,ve.ce.BranchNode);ve.ce.MWGalleryImageCaptionNode.static.name='mwGalleryImageCaption';ve.ce.MWGalleryImageCaptionNode.static.tagName='div';ve.ce.nodeFactory.register(ve.ce.MWGalleryImageCaptionNode);ve.ce.MWGalleryImageNode=function VeCeMWGalleryImageNode(model){var attributes,galleryMwAttrs,mode,
imagePadding,outerDivWidth,imageHeight,innerDivHeight,innerDivMargin,innerDivWidth,$thumbDiv,$innerDiv,$a,$img,resourceTitle,defaults=mw.config.get('wgVisualEditorConfig').galleryOptions;ve.ce.MWGalleryImageNode.super.apply(this,arguments);attributes=model.getAttributes();galleryMwAttrs=model.parent.getAttributes().mw.attrs;mode=galleryMwAttrs.mode||defaults.mode;if(mode==='traditional'||mode==='nolines'||mode==='slideshow'){imagePadding=(mode==='traditional'?30:0);innerDivWidth=parseInt(galleryMwAttrs.widths||defaults.imageWidth)+imagePadding;innerDivHeight=parseInt(galleryMwAttrs.heights||defaults.imageHeight)+imagePadding;if(mode==='traditional'){imageHeight=parseInt(attributes.height);innerDivMargin=((innerDivHeight-imageHeight)/2)+'px auto';}else{innerDivMargin=0;}outerDivWidth=innerDivWidth+8;}else{innerDivWidth=parseInt(attributes.width);innerDivHeight=parseInt(galleryMwAttrs.heights||defaults.imageHeight);innerDivMargin=0;outerDivWidth=innerDivWidth+4;}resourceTitle=mw.Title.
newFromText(mw.libs.ve.normalizeParsoidResourceName(attributes.resource));this.$element.addClass('gallerybox').css('width',outerDivWidth+'px');$thumbDiv=$('<div>').addClass('thumb').css('width',innerDivWidth+'px').css('height',innerDivHeight+'px');$innerDiv=$('<span>').css('margin',innerDivMargin);$a=$('<a>').addClass('image');$img=$('<img>').attr('resource',attributes.resource).attr('alt',attributes.altText).attr('src',attributes.src).attr('height',attributes.height).attr('width',attributes.width);this.$filenameA=$('<a>').attr('href','#').text(resourceTitle?resourceTitle.getMainText():attributes.resource).toggleClass('oo-ui-element-hidden',galleryMwAttrs.showfilename!=='yes');this.$element.prepend($thumbDiv.append($innerDiv.append($a.append($img))),this.$filenameA);this.model.parent.connect(this,{attributeChange:'onGalleryAttributeChange'});};OO.inheritClass(ve.ce.MWGalleryImageNode,ve.ce.BranchNode);ve.ce.MWGalleryImageNode.static.name='mwGalleryImage';ve.ce.MWGalleryImageNode.static
.tagName='li';ve.ce.MWGalleryImageNode.prototype.onGalleryAttributeChange=function(key,from,to){if(key!=='mw'){return;}this.$filenameA.toggleClass('oo-ui-element-hidden',to.attrs.showfilename!=='yes');};ve.ce.MWGalleryImageNode.prototype.getDomPosition=function(){var domNode=this.$element.last()[0];return{node:domNode,offset:domNode.childNodes.length};};ve.ce.nodeFactory.register(ve.ce.MWGalleryImageNode);ve.ce.MWGalleryNode=function VeCeMWGalleryNode(){ve.ce.MWGalleryNode.super.apply(this,arguments);ve.ce.FocusableNode.call(this,this.$element);this.model.connect(this,{update:'updateInvisibleIcon'});this.model.connect(this,{update:'onUpdate'});this.model.connect(this,{attributeChange:'onAttributeChange'});this.$element.addClass('gallery');this.onUpdate();};OO.inheritClass(ve.ce.MWGalleryNode,ve.ce.BranchNode);OO.mixinClass(ve.ce.MWGalleryNode,ve.ce.FocusableNode);ve.ce.MWGalleryNode.static.name='mwGallery';ve.ce.MWGalleryNode.static.tagName='ul';ve.ce.MWGalleryNode.static.
iconWhenInvisible='imageGallery';ve.ce.MWGalleryNode.static.primaryCommandName='gallery';ve.ce.MWGalleryNode.prototype.onUpdate=function(){var mwAttrs,defaults,mode,imageWidth,imagePadding;mwAttrs=this.model.getAttribute('mw').attrs;defaults=mw.config.get('wgVisualEditorConfig').galleryOptions;mode=mwAttrs.mode||defaults.mode;this.$element.attr('style',mwAttrs.style||null);if(mwAttrs.perrow&&(mode==='traditional'||mode==='nolines')){imageWidth=parseInt(mwAttrs.widths||defaults.imageWidth);imagePadding=(mode==='traditional'?30:0);this.$element.css('max-width',mwAttrs.perrow*(imageWidth+imagePadding+8));}};ve.ce.MWGalleryNode.prototype.onAttributeChange=function(key,from,to){var defaults=mw.config.get('wgVisualEditorConfig').galleryOptions;if(key!=='mw'){return;}if(from.attrs.class!==to.attrs.class){this.$element.removeClass(from.attrs.class).addClass(to.attrs.class);}if(from.attrs.mode!==to.attrs.mode){this.$element.removeClass('mw-gallery-'+(from.attrs.mode||defaults.mode)).addClass(
'mw-gallery-'+(to.attrs.mode||defaults.mode));}};ve.ce.nodeFactory.register(ve.ce.MWGalleryNode);ve.dm.MWGalleryCaptionNode=function VeDmMWGalleryCaptionNode(){ve.dm.MWGalleryCaptionNode.super.apply(this,arguments);};OO.inheritClass(ve.dm.MWGalleryCaptionNode,ve.dm.BranchNode);ve.dm.MWGalleryCaptionNode.static.name='mwGalleryCaption';ve.dm.MWGalleryCaptionNode.static.matchTagNames=['li'];ve.dm.MWGalleryCaptionNode.static.matchFunction=function(element){var parentTypeof=(element.parentNode&&element.parentNode.getAttribute('typeof'))||'';return element.getAttribute('class')==='gallerycaption'&&parentTypeof.trim().split(/\s+/).indexOf('mw:Extension/gallery')!==-1;};ve.dm.MWGalleryCaptionNode.static.parentNodeTypes=['mwGallery'];ve.dm.MWGalleryCaptionNode.static.toDomElements=function(dataElement,doc){var li=doc.createElement('li');li.classList.add('gallerycaption');return[li];};ve.dm.modelRegistry.register(ve.dm.MWGalleryCaptionNode);ve.dm.MWGalleryImageCaptionNode=function
VeDmMWGalleryImageCaptionNode(){ve.dm.MWGalleryImageCaptionNode.super.apply(this,arguments);};OO.inheritClass(ve.dm.MWGalleryImageCaptionNode,ve.dm.BranchNode);ve.dm.MWGalleryImageCaptionNode.static.name='mwGalleryImageCaption';ve.dm.MWGalleryImageCaptionNode.static.matchTagNames=[];ve.dm.MWGalleryImageCaptionNode.static.parentNodeTypes=['mwGalleryImage'];ve.dm.MWGalleryImageCaptionNode.static.toDomElements=function(dataElement,doc){var div=doc.createElement('div');div.classList.add('gallerytext');return[div];};ve.dm.modelRegistry.register(ve.dm.MWGalleryImageCaptionNode);ve.dm.MWGalleryImageNode=function VeDmMWGalleryImageNode(){ve.dm.MWGalleryImageNode.super.apply(this,arguments);};OO.inheritClass(ve.dm.MWGalleryImageNode,ve.dm.BranchNode);ve.dm.MWGalleryImageNode.static.name='mwGalleryImage';ve.dm.MWGalleryImageNode.static.matchTagNames=['li'];ve.dm.MWGalleryImageNode.static.childNodeTypes=['mwGalleryImageCaption'];ve.dm.MWGalleryImageNode.static.matchFunction=function(element){var
parentTypeof=(element.parentNode&&element.parentNode.getAttribute('typeof'))||'';return element.getAttribute('class')==='gallerybox'&&parentTypeof.trim().split(/\s+/).indexOf('mw:Extension/gallery')!==-1;};ve.dm.MWGalleryImageNode.static.parentNodeTypes=['mwGallery'];ve.dm.MWGalleryImageNode.static.toDataElement=function(domElements,converter){var li,img,captionNode,caption,filename,dataElement,figureInline;li=domElements[0];img=li.querySelector('img,audio,video,span[resource]');figureInline=img.parentNode.parentNode;captionNode=li.querySelector('.gallerytext');if(captionNode){captionNode=captionNode.cloneNode(!0);filename=captionNode.querySelector('.galleryfilename');if(filename){filename.remove();}}if(captionNode){caption=converter.getDataFromDomClean(captionNode,{type:'mwGalleryImageCaption'});}else{caption=[{type:'mwGalleryImageCaption'},{type:'paragraph',internal:{generated:'wrapper'}},{type:'/paragraph'},{type:'/mwGalleryImageCaption'}];}dataElement={type:this.name,attributes:{
resource:'./'+mw.libs.ve.normalizeParsoidResourceName(img.getAttribute('resource')),altText:img.getAttribute('alt'),src:img.getAttribute('src')||img.getAttribute('poster'),height:img.getAttribute('height'),width:img.getAttribute('width'),tagName:figureInline.nodeName.toLowerCase()}};return[dataElement].concat(caption).concat({type:'/'+this.name});};ve.dm.MWGalleryImageNode.static.toDomElements=function(data,doc){var model=data,li=doc.createElement('li'),thumbDiv=doc.createElement('div'),innerDiv=doc.createElement(model.attributes.tagName||'span'),a=doc.createElement('a'),img=doc.createElement('img'),alt=model.attributes.altText;li.classList.add('gallerybox');thumbDiv.classList.add('thumb');innerDiv.setAttribute('typeof','mw:Image');img.setAttribute('resource',model.attributes.resource);img.setAttribute('src',model.attributes.src);if(alt){img.setAttribute('alt',alt);}a.appendChild(img);innerDiv.appendChild(a);thumbDiv.appendChild(innerDiv);li.appendChild(thumbDiv);return[li];};ve.dm.
MWGalleryImageNode.static.describeChange=function(key){if(key==='src'||key==='width'||key==='height'){return null;}return ve.dm.MWGalleryImageNode.super.static.describeChange.apply(this,arguments);};ve.dm.MWGalleryImageNode.prototype.getCaptionNode=function(){return this.children.length>0?this.children[0]:null;};ve.dm.modelRegistry.register(ve.dm.MWGalleryImageNode);ve.dm.MWGalleryNode=function VeDmMWGalleryNode(){ve.dm.MWGalleryNode.super.apply(this,arguments);ve.dm.FocusableNode.call(this);};OO.inheritClass(ve.dm.MWGalleryNode,ve.dm.BranchNode);OO.mixinClass(ve.dm.MWGalleryNode,ve.dm.FocusableNode);ve.dm.MWGalleryNode.static.name='mwGallery';ve.dm.MWGalleryNode.static.matchRdfaTypes=['mw:Extension/gallery'];ve.dm.MWGalleryNode.static.matchTagNames=['ul'];ve.dm.MWGalleryNode.static.childNodeTypes=['mwGalleryCaption','mwGalleryImage'];ve.dm.MWGalleryNode.static.disallowedAnnotationTypes=['link'];ve.dm.MWGalleryNode.static.cloneElement=function(){var clone=ve.dm.LeafNode.static.
cloneElement.apply(this,arguments);delete clone.attributes.originalMw;return clone;};ve.dm.MWGalleryNode.static.getHashObject=function(dataElement){return{type:dataElement.type,mw:ve.copy(dataElement.attributes.mw)};};ve.dm.MWGalleryNode.static.toDataElement=function(domElements){var mwDataJSON=domElements[0].getAttribute('data-mw'),mwData=mwDataJSON?JSON.parse(mwDataJSON):{};return{type:this.name,attributes:{mw:mwData,originalMw:mwDataJSON}};};ve.dm.MWGalleryNode.static.toDomElements=function(data,doc){var ul=doc.createElement('ul');ul.setAttribute('typeof','mw:Extension/gallery');ul.setAttribute('data-mw',JSON.stringify(data.attributes.mw));return[ul];};ve.dm.MWGalleryNode.static.describeChanges=function(attributeChanges,attributes,element){if(attributeChanges.mw){return ve.dm.MWGalleryNode.super.static.describeChanges.call(this,ve.ui.DiffElement.static.compareAttributes(attributeChanges.mw.from.attrs||{},attributeChanges.mw.to.attrs||{}),attributes,element);}return[];};ve.dm.
MWGalleryNode.static.describeChange=function(key){if(key==='caption'){return null;}return ve.dm.MWGalleryNode.super.static.describeChange.apply(this,arguments);};ve.dm.MWGalleryNode.prototype.getCaptionNode=function(){var node=this.children[0];return node instanceof ve.dm.MWGalleryCaptionNode?node:null;};ve.dm.MWGalleryNode.prototype.getImageNodes=function(){var images=this.children.filter(function(child){return child instanceof ve.dm.MWGalleryImageNode;});return images;};ve.dm.modelRegistry.register(ve.dm.MWGalleryNode);ve.ui.MWGalleryContextItem=function VeUiMWGalleryContextItem(){ve.ui.MWGalleryContextItem.super.apply(this,arguments);this.$element.addClass('ve-ui-mwGalleryContextItem');};OO.inheritClass(ve.ui.MWGalleryContextItem,ve.ui.LinearContextItem);ve.ui.MWGalleryContextItem.static.name='mwGallery';ve.ui.MWGalleryContextItem.static.icon='imageGallery';ve.ui.MWGalleryContextItem.static.label=OO.ui.deferMsg('visualeditor-mwgallerydialog-title');ve.ui.MWGalleryContextItem.static.
modelClasses=[ve.dm.MWGalleryNode];ve.ui.MWGalleryContextItem.static.commandName='gallery';ve.ui.MWGalleryContextItem.prototype.getDescription=function(){return ve.msg('visualeditor-mwgallerycontext-description',this.model.children.length);};ve.ui.contextItemFactory.register(ve.ui.MWGalleryContextItem);ve.ui.MWGalleryDialog=function VeUiMWGalleryDialog(){ve.ui.MWGalleryDialog.super.apply(this,arguments);this.$element.addClass('ve-ui-mwGalleryDialog');};OO.inheritClass(ve.ui.MWGalleryDialog,ve.ui.NodeDialog);ve.ui.MWGalleryDialog.static.name='gallery';ve.ui.MWGalleryDialog.static.size='large';ve.ui.MWGalleryDialog.static.title=OO.ui.deferMsg('visualeditor-mwgallerydialog-title');ve.ui.MWGalleryDialog.static.modelClasses=[ve.dm.MWGalleryNode];ve.ui.MWGalleryDialog.static.includeCommands=null;ve.ui.MWGalleryDialog.static.excludeCommands=['paragraph','heading1','heading2','heading3','heading4','heading5','heading6','preformatted','blockquote','insertTable','deleteTable','mergeCells',
'tableCaption','tableCellHeader','tableCellData','bullet','bulletWrapOnce','number','numberWrapOnce','indent','outdent','gallery'];ve.ui.MWGalleryDialog.static.getImportRules=function(){var rules=ve.copy(ve.init.target.constructor.static.importRules);return ve.extendObject(rules,{all:{blacklist:ve.extendObject({list:!0,listItem:!0,definitionList:!0,definitionListItem:!0,table:!0,tableCaption:!0,tableSection:!0,tableRow:!0,tableCell:!0,mwTable:!0,mwTransclusionTableCell:!0,mwGallery:!0},ve.getProp(rules,'all','blacklist')),conversions:ve.extendObject({mwHeading:'paragraph'},ve.getProp(rules,'all','conversions'))}});};ve.ui.MWGalleryDialog.prototype.initialize=function(){var imagesTabPanel,optionsTabPanel,imageListMenuLayout,imageListMenuPanel,imageListContentPanel,modeField,captionField,widthsField,heightsField,perrowField,showFilenameField,classesField,stylesField,highlightedCaptionField,highlightedCaptionFieldset,highlightedAltTextField,
highlightedAltTextFieldset;ve.ui.MWGalleryDialog.super.prototype.initialize.call(this);this.highlightedItem=null;this.searchPanelVisible=!1;this.selectedFilenames={};this.initialImageData=[];this.originalMwDataNormalized=null;this.originalGalleryGroupItems=[];this.imageData={};this.isMobile=OO.ui.isMobile();this.defaults=mw.config.get('wgVisualEditorConfig').galleryOptions;this.indexLayout=new OO.ui.IndexLayout();imagesTabPanel=new OO.ui.TabPanelLayout('images',{label:ve.msg('visualeditor-mwgallerydialog-card-images'),scrollable:!1,padded:!0});optionsTabPanel=new OO.ui.TabPanelLayout('options',{label:ve.msg('visualeditor-mwgallerydialog-card-options'),padded:!0});imageListContentPanel=new OO.ui.PanelLayout({padded:!0,expanded:!0,scrollable:!0});imageListMenuPanel=new OO.ui.PanelLayout({padded:!0,expanded:!0});imageListMenuLayout=new OO.ui.MenuLayout({menuPosition:this.isMobile?'after':'bottom',classes:['ve-ui-mwGalleryDialog-imageListMenuLayout',this.isMobile?
've-ui-mwGalleryDialog-imageListMenuLayout-mobile':'ve-ui-mwGalleryDialog-imageListMenuLayout-desktop'],contentPanel:imageListContentPanel,menuPanel:imageListMenuPanel});this.editPanel=new OO.ui.PanelLayout({padded:!0,expanded:!0,scrollable:!0});this.searchPanel=new OO.ui.PanelLayout({padded:!0,expanded:!0,scrollable:!0}).toggle(!1);this.editSearchStack=new OO.ui.StackLayout({items:[this.editPanel,this.searchPanel]});this.imageTabMenuLayout=new OO.ui.MenuLayout({menuPosition:this.isMobile?'top':'before',classes:['ve-ui-mwGalleryDialog-menuLayout',this.isMobile?'ve-ui-mwGalleryDialog-menuLayout-mobile':'ve-ui-mwGalleryDialog-menuLayout-desktop'],menuPanel:imageListMenuLayout,contentPanel:this.editSearchStack});this.$emptyGalleryMessage=$('<div>').addClass('oo-ui-element-hidden').text(ve.msg('visualeditor-mwgallerydialog-empty-gallery-message'));this.galleryGroup=new ve.ui.MWGalleryGroupWidget({orientation:this.isMobile?'horizontal':'vertical'});this.showSearchPanelButton=
new OO.ui.ButtonWidget({label:ve.msg('visualeditor-mwgallerydialog-search-button-label'),invisibleLabel:!!this.isMobile,icon:'add',framed:!1,flags:['progressive'],classes:['ve-ui-mwGalleryDialog-show-search-panel-button']});this.filenameFieldset=new OO.ui.FieldsetLayout({label:ve.msg('visualeditor-dialog-media-content-filename'),icon:'image'});this.$highlightedImage=$('<div>').addClass('ve-ui-mwGalleryDialog-highlighted-image');this.filenameFieldset.$element.append(this.$highlightedImage);this.highlightedCaptionTarget=ve.init.target.createTargetWidget({includeCommands:this.constructor.static.includeCommands,excludeCommands:this.constructor.static.excludeCommands,importRules:this.constructor.static.getImportRules(),multiline:!1});this.highlightedAltTextInput=new OO.ui.TextInputWidget({placeholder:ve.msg('visualeditor-dialog-media-alttext-section')});this.removeButton=new OO.ui.ButtonWidget({label:ve.msg('visualeditor-mwgallerydialog-remove-button-label'),icon:'trash',flags:[
'destructive'],classes:['ve-ui-mwGalleryDialog-remove-button']});highlightedCaptionField=new OO.ui.FieldLayout(this.highlightedCaptionTarget,{align:'top'});highlightedCaptionFieldset=new OO.ui.FieldsetLayout({label:ve.msg('visualeditor-dialog-media-content-section')});highlightedCaptionFieldset.addItems(highlightedCaptionField);highlightedAltTextField=new OO.ui.FieldLayout(this.highlightedAltTextInput,{align:'top'});highlightedAltTextFieldset=new OO.ui.FieldsetLayout({label:ve.msg('visualeditor-dialog-media-alttext-section')});highlightedAltTextFieldset.addItems(highlightedAltTextField);this.searchWidget=new mw.widgets.MediaSearchWidget({rowHeight:this.isMobile?100:150});this.modeDropdown=new OO.ui.DropdownWidget({menu:{items:[new OO.ui.MenuOptionWidget({data:'traditional',label:ve.msg('visualeditor-mwgallerydialog-mode-dropdown-label-traditional')}),new OO.ui.MenuOptionWidget({data:'nolines',label:ve.msg('visualeditor-mwgallerydialog-mode-dropdown-label-nolines')}),new OO.ui.
MenuOptionWidget({data:'packed',label:ve.msg('visualeditor-mwgallerydialog-mode-dropdown-label-packed')}),new OO.ui.MenuOptionWidget({data:'packed-overlay',label:ve.msg('visualeditor-mwgallerydialog-mode-dropdown-label-packed-overlay')}),new OO.ui.MenuOptionWidget({data:'packed-hover',label:ve.msg('visualeditor-mwgallerydialog-mode-dropdown-label-packed-hover')}),new OO.ui.MenuOptionWidget({data:'slideshow',label:ve.msg('visualeditor-mwgallerydialog-mode-dropdown-label-slideshow')})]}});this.captionTarget=ve.init.target.createTargetWidget({includeCommands:this.constructor.static.includeCommands,excludeCommands:this.constructor.static.excludeCommands,importRules:this.constructor.static.getImportRules(),multiline:!1});this.widthsInput=new OO.ui.NumberInputWidget({min:0,showButtons:!1,input:{placeholder:ve.msg('visualeditor-mwgallerydialog-widths-input-placeholder',this.defaults.imageWidth)}});this.heightsInput=new OO.ui.NumberInputWidget({min:0,showButtons:!1,input:{placeholder:
ve.msg('visualeditor-mwgallerydialog-heights-input-placeholder',this.defaults.imageHeight)}});this.perrowInput=new OO.ui.NumberInputWidget({min:0,showButtons:!1});this.showFilenameCheckbox=new OO.ui.CheckboxInputWidget({value:'yes'});this.classesInput=new OO.ui.TextInputWidget({placeholder:ve.msg('visualeditor-mwgallerydialog-classes-input-placeholder')});this.stylesInput=new OO.ui.TextInputWidget({placeholder:ve.msg('visualeditor-mwgallerydialog-styles-input-placeholder')});modeField=new OO.ui.FieldLayout(this.modeDropdown,{label:ve.msg('visualeditor-mwgallerydialog-mode-field-label')});captionField=new OO.ui.FieldLayout(this.captionTarget,{label:ve.msg('visualeditor-mwgallerydialog-caption-field-label'),align:this.isMobile?'top':'left'});widthsField=new OO.ui.FieldLayout(this.widthsInput,{label:ve.msg('visualeditor-mwgallerydialog-widths-field-label')});heightsField=new OO.ui.FieldLayout(this.heightsInput,{label:ve.msg('visualeditor-mwgallerydialog-heights-field-label')});
perrowField=new OO.ui.FieldLayout(this.perrowInput,{label:ve.msg('visualeditor-mwgallerydialog-perrow-field-label')});showFilenameField=new OO.ui.FieldLayout(this.showFilenameCheckbox,{label:ve.msg('visualeditor-mwgallerydialog-show-filename-field-label')});classesField=new OO.ui.FieldLayout(this.classesInput,{label:ve.msg('visualeditor-mwgallerydialog-classes-field-label')});stylesField=new OO.ui.FieldLayout(this.stylesInput,{label:ve.msg('visualeditor-mwgallerydialog-styles-field-label')});imageListMenuPanel.$element.append(this.showSearchPanelButton.$element);imageListContentPanel.$element.append(this.$emptyGalleryMessage,this.galleryGroup.$element);this.editPanel.$element.append(this.filenameFieldset.$element,highlightedCaptionFieldset.$element,highlightedAltTextFieldset.$element,this.removeButton.$element);this.searchPanel.$element.append(this.searchWidget.$element);imagesTabPanel.$element.append(this.imageTabMenuLayout.$element);optionsTabPanel.$element.append(modeField.$element,
captionField.$element,widthsField.$element,heightsField.$element,perrowField.$element,showFilenameField.$element,classesField.$element,stylesField.$element);this.indexLayout.addTabPanels([imagesTabPanel,optionsTabPanel]);this.$body.append(this.indexLayout.$element);};ve.ui.MWGalleryDialog.prototype.getSetupProcess=function(data){return ve.ui.MWGalleryDialog.super.prototype.getSetupProcess.call(this,data).next(function(){var i,ilen,resourceTitle,resource,imageTitles,image,imageCaptionNode,mode,widths,heights,perrow,showFilename,classes,styles,namespaceIds=mw.config.get('wgNamespaceIds'),dialog=this,mwData=this.selectedNode&&this.selectedNode.getAttribute('mw'),attributes=mwData&&mwData.attrs,captionNode=this.selectedNode&&this.selectedNode.getCaptionNode(),imageNodes=this.selectedNode&&this.selectedNode.getImageNodes(),isReadOnly=this.isReadOnly();this.anyItemModified=!1;if(this.selectedNode){imageTitles=[];for(i=0,ilen=imageNodes.length;i<ilen;i++){image=imageNodes[i];resourceTitle=
mw.Title.newFromText(mw.libs.ve.normalizeParsoidResourceName(image.getAttribute('resource')),namespaceIds.file);if(!resourceTitle){continue;}resource=resourceTitle.getPrefixedText();imageCaptionNode=image.getCaptionNode();imageTitles.push(resource);this.initialImageData.push({resource:resource,altText:image.getAttribute('altText'),src:image.getAttribute('src'),height:image.getAttribute('height'),width:image.getAttribute('width'),captionDocument:dialog.createCaptionDocument(imageCaptionNode),tagName:image.getAttribute('tagName')});}this.imagesPromise=this.requestImages({titles:imageTitles}).done(function(){dialog.onHighlightItem();});}else{this.toggleEmptyGalleryMessage(!0);this.showSearchPanelButton.toggle(!1);this.toggleSearchPanel(!0);}mode=attributes&&attributes.mode||this.defaults.mode;widths=attributes&&parseInt(attributes.widths)||'';heights=attributes&&parseInt(attributes.heights)||'';perrow=attributes&&attributes.perrow||'';showFilename=attributes&&attributes.
showfilename==='yes';classes=attributes&&attributes.class||'';styles=attributes&&attributes.style||'';this.captionDocument=this.createCaptionDocument(captionNode);this.modeDropdown.getMenu().selectItemByData(mode);this.widthsInput.setValue(widths);this.heightsInput.setValue(heights);this.perrowInput.setValue(perrow);this.showFilenameCheckbox.setSelected(showFilename);this.classesInput.setValue(classes);this.stylesInput.setValue(styles);this.captionTarget.setDocument(this.captionDocument);this.captionTarget.setReadOnly(isReadOnly);if(mwData){this.originalMwDataNormalized=ve.copy(mwData);this.updateMwData(this.originalMwDataNormalized);}this.highlightedAltTextInput.setReadOnly(isReadOnly);this.modeDropdown.setDisabled(isReadOnly);this.widthsInput.setReadOnly(isReadOnly);this.heightsInput.setReadOnly(isReadOnly);this.perrowInput.setReadOnly(isReadOnly);this.showFilenameCheckbox.setDisabled(isReadOnly);this.classesInput.setReadOnly(isReadOnly);this.stylesInput.setReadOnly(isReadOnly);this.
showSearchPanelButton.setDisabled(isReadOnly);this.removeButton.setDisabled(isReadOnly);this.galleryGroup.toggleDraggable(!isReadOnly);this.onModeDropdownChange();this.indexLayout.connect(this,{set:'updateDialogSize'});this.searchWidget.getResults().connect(this,{choose:'onSearchResultsChoose'});this.showSearchPanelButton.connect(this,{click:'onShowSearchPanelButtonClick'});this.galleryGroup.connect(this,{editItem:'onHighlightItem'});this.galleryGroup.connect(this,{change:'updateActions'});this.removeButton.connect(this,{click:'onRemoveItem'});this.modeDropdown.getMenu().connect(this,{choose:'onModeDropdownChange'});this.widthsInput.connect(this,{change:'updateActions'});this.heightsInput.connect(this,{change:'updateActions'});this.perrowInput.connect(this,{change:'updateActions'});this.showFilenameCheckbox.connect(this,{change:'updateActions'});this.classesInput.connect(this,{change:'updateActions'});this.stylesInput.connect(this,{change:'updateActions'});this.captionTarget.connect(
this,{change:'updateActions'});this.highlightedAltTextInput.connect(this,{change:'updateActions'});this.highlightedCaptionTarget.connect(this,{change:'updateActions'});return this.imagesPromise;},this);};ve.ui.MWGalleryDialog.prototype.createCaptionDocument=function(captionNode){if(captionNode&&captionNode.getLength()>0){return this.selectedNode.getDocument().cloneFromRange(captionNode.getRange());}else{return this.getFragment().getDocument().cloneWithData([{type:'paragraph',internal:{generated:'wrapper'}},{type:'/paragraph'},{type:'internalList'},{type:'/internalList'}]);}};ve.ui.MWGalleryDialog.prototype.getReadyProcess=function(data){return ve.ui.MWGalleryDialog.super.prototype.getReadyProcess.call(this,data).next(function(){this.searchWidget.getQuery().focus().select();},this);};ve.ui.MWGalleryDialog.prototype.getTeardownProcess=function(data){return ve.ui.MWGalleryDialog.super.prototype.getTeardownProcess.call(this,data).first(function(){this.indexLayout.setTabPanel('images');this
.indexLayout.resetScroll();this.imageTabMenuLayout.resetScroll();this.galleryGroup.clearItems();this.searchWidget.getQuery().setValue('');this.searchWidget.teardown();this.highlightedItem=null;this.searchPanelVisible=!1;this.selectedFilenames={};this.initialImageData=[];this.originalMwDataNormalized=null;this.originalGalleryGroupItems=[];this.indexLayout.disconnect(this);this.searchWidget.getResults().disconnect(this);this.showSearchPanelButton.disconnect(this);this.galleryGroup.disconnect(this);this.removeButton.disconnect(this);this.modeDropdown.disconnect(this);this.widthsInput.disconnect(this);this.heightsInput.disconnect(this);this.perrowInput.disconnect(this);this.showFilenameCheckbox.disconnect(this);this.classesInput.disconnect(this);this.stylesInput.disconnect(this);this.highlightedAltTextInput.disconnect(this);this.captionTarget.disconnect(this);this.highlightedCaptionTarget.disconnect(this);},this);};ve.ui.MWGalleryDialog.prototype.getActionProcess=function(action){return ve
.ui.MWGalleryDialog.super.prototype.getActionProcess.call(this,action).next(function(){if(action==='done'){this.updateHighlightedItem();this.insertOrUpdateNode();this.close({action:'done'});}},this);};ve.ui.MWGalleryDialog.prototype.getBodyHeight=function(){return 600;};ve.ui.MWGalleryDialog.prototype.requestImages=function(options){var i,len,dialog=this,promises=[];for(i=0,len=options.titles.length;i<len;i++){promises.push(ve.init.platform.galleryImageInfoCache.get(options.titles[i]));}return ve.promiseAll(promises).done(function(){var resp={};for(i=0;i<len;i++){resp[options.titles[i]]=arguments[i];}dialog.onRequestImagesSuccess(resp);});};ve.ui.MWGalleryDialog.prototype.onRequestImagesSuccess=function(response){var title,thumbUrls={},items=[],config={isMobile:this.isMobile,draggable:!this.isReadOnly()};for(title in response){thumbUrls[title]={thumbUrl:response[title].thumburl,width:response[title].thumbwidth,height:response[title].thumbheight};}if(this.initialImageData.length>0){this
.initialImageData.forEach(function(image){image.thumbUrl=thumbUrls[image.resource].thumbUrl;items.push(new ve.ui.MWGalleryItemWidget(image,config));});this.initialImageData=[];this.originalGalleryGroupItems=ve.copy(items);}else{for(title in this.selectedFilenames){if(Object.prototype.hasOwnProperty.call(thumbUrls,title)){items.push(new ve.ui.MWGalleryItemWidget({resource:title,altText:'',src:'',height:thumbUrls[title].height,width:thumbUrls[title].width,thumbUrl:thumbUrls[title].thumbUrl,captionDocument:this.createCaptionDocument(null)},config));delete this.selectedFilenames[title];}}}this.galleryGroup.addItems(items);this.updateActions();this.toggleEmptyGalleryMessage(!1);this.showSearchPanelButton.toggle(!0);};ve.ui.MWGalleryDialog.prototype.addNewImage=function(title){var dialog=this;this.selectedFilenames[title]=!0;this.requestImages({titles:[title]}).done(function(){var items=dialog.galleryGroup.items;dialog.onHighlightItem(items[items.length-1]);dialog.
highlightedCaptionTarget.focus();});};ve.ui.MWGalleryDialog.prototype.updateHighlightedItem=function(){this.anyItemModified=this.anyItemModified||this.isHighlightedItemModified();if(this.highlightedItem){this.highlightedItem.setAltText(this.highlightedAltTextInput.getValue());}};ve.ui.MWGalleryDialog.prototype.onSearchResultsChoose=function(item){var title=mw.Title.newFromText(item.getData().title).getPrefixedText();if(!Object.prototype.hasOwnProperty.call(this.selectedFilenames,title)){this.addNewImage(title);}this.updateActions();};ve.ui.MWGalleryDialog.prototype.onRemoveItem=function(){this.galleryGroup.removeItems([this.highlightedItem]);this.onHighlightItem();};ve.ui.MWGalleryDialog.prototype.onHighlightItem=function(item){var title;if(this.highlightedItem){this.highlightedItem.toggleHighlighted(!1);}this.toggleSearchPanel(!1);item=item||this.galleryGroup.items[0];if(!item){this.toggleEmptyGalleryMessage(!0);this.showSearchPanelButton.toggle(!1);this.toggleSearchPanel(
!0);return;}item.toggleHighlighted(!0);this.highlightedItem=item;OO.ui.Element.static.scrollIntoView(item.$element[0]);title=mw.Title.newFromText(mw.libs.ve.normalizeParsoidResourceName(item.resource));this.filenameFieldset.setLabel($('<span>').append(document.createTextNode(title.getMainText()+' '),$('<a>').addClass('ve-ui-mwMediaDialog-description-link').attr('href',title.getUrl()).attr('target','_blank').attr('rel','noopener').text(ve.msg('visualeditor-dialog-media-content-description-link'))));this.$highlightedImage.css('background-image','url('+item.thumbUrl+')');this.highlightedCaptionTarget.setDocument(item.captionDocument);this.highlightedCaptionTarget.setReadOnly(this.isReadOnly());this.highlightedAltTextInput.setValue(item.altText);};ve.ui.MWGalleryDialog.prototype.onModeDropdownChange=function(){var mode=this.modeDropdown.getMenu().findSelectedItem().getData(),disabled=(mode==='packed'||mode==='packed-overlay'||mode==='packed-hover'||mode==='slideshow');this.widthsInput.
setDisabled(disabled);this.perrowInput.setDisabled(disabled);this.heightsInput.setDisabled(mode==='slideshow');this.updateActions();};ve.ui.MWGalleryDialog.prototype.onShowSearchPanelButtonClick=function(){this.toggleSearchPanel(!0);};ve.ui.MWGalleryDialog.prototype.toggleSearchPanel=function(visible){visible=visible!==undefined?visible:!this.searchPanelVisible;if(!this.searchPanelVisible){this.updateHighlightedItem();}this.searchPanelVisible=visible;this.editSearchStack.setItem(visible?this.searchPanel:this.editPanel);if(!visible){this.highlightedCaptionTarget.focus();}else{this.searchWidget.queryMediaQueue();this.searchWidget.getQuery().focus().select();}this.updateDialogSize();};ve.ui.MWGalleryDialog.prototype.updateDialogSize=function(){if(this.searchPanelVisible&&this.indexLayout.currentTabPanelName==='images'){this.setSize('larger');}else{this.setSize('large');}};ve.ui.MWGalleryDialog.prototype.toggleEmptyGalleryMessage=function(empty){if(empty){this.$emptyGalleryMessage.
removeClass('oo-ui-element-hidden');}else{this.$emptyGalleryMessage.addClass('oo-ui-element-hidden');}};ve.ui.MWGalleryDialog.prototype.updateActions=function(){this.actions.setAbilities({done:this.isModified()});};ve.ui.MWGalleryDialog.prototype.isModified=function(){var mwDataCopy,i;if(this.originalMwDataNormalized){mwDataCopy=ve.copy(this.selectedNode.getAttribute('mw'));this.updateMwData(mwDataCopy);if(!ve.compare(mwDataCopy,this.originalMwDataNormalized)){return!0;}}if(this.captionTarget.hasBeenModified()){return!0;}if(this.anyItemModified||this.isHighlightedItemModified()){return!0;}if(this.originalGalleryGroupItems){if(this.galleryGroup.items.length!==this.originalGalleryGroupItems.length){return!0;}for(i=0;i<this.galleryGroup.items.length;i++){if(this.galleryGroup.items[i]!==this.originalGalleryGroupItems[i]){return!0;}}}return!1;};ve.ui.MWGalleryDialog.prototype.isHighlightedItemModified=function(){if(this.highlightedItem){if(this.highlightedAltTextInput.getValue(
)!==this.highlightedItem.altText){return!0;}if(this.highlightedCaptionTarget.hasBeenModified()){return!0;}}return!1;};ve.ui.MWGalleryDialog.prototype.insertOrUpdateNode=function(){var i,ilen,element,mwData,innerRange,captionInsertionOffset,surfaceModel=this.getFragment().getSurface(),surfaceModelDocument=surfaceModel.getDocument(),items=this.galleryGroup.items,data=[];function scaleImage(height,width,maxHeight,maxWidth){var scaleFactor,heightScaleFactor,widthScaleFactor;heightScaleFactor=maxHeight/height;widthScaleFactor=maxWidth/width;scaleFactor=width*heightScaleFactor>maxWidth?widthScaleFactor:heightScaleFactor;return{height:Math.round(height*scaleFactor),width:Math.round(width*scaleFactor)};}function getImageLinearData(image){var size,imageAttributes;size=scaleImage(parseInt(image.height),parseInt(image.width),parseInt(mwData.attrs.heights||this.defaults.imageHeight),parseInt(mwData.attrs.widths||this.defaults.imageWidth));imageAttributes={resource:'./'+image.resource,
altText:image.altText,src:image.thumbUrl,height:size.height,width:size.width,tagName:image.tagName};return[{type:'mwGalleryImage',attributes:imageAttributes},{type:'mwGalleryImageCaption'},{type:'/mwGalleryImageCaption'},{type:'/mwGalleryImage'}];}if(this.selectedNode){mwData=ve.copy(this.selectedNode.getAttribute('mw'));this.updateMwData(mwData);surfaceModel.change(ve.dm.TransactionBuilder.static.newFromAttributeChanges(surfaceModelDocument,this.selectedNode.getOuterRange().start,{mw:mwData}));innerRange=this.selectedNode.getRange();}else{element={type:'mwGallery',attributes:{mw:{name:'gallery',attrs:{},body:{}}}};mwData=element.attributes.mw;this.updateMwData(mwData);this.fragment=this.getFragment().collapseToEnd();this.getFragment().insertContent([element,{type:'/mwGallery'}]);innerRange=new ve.Range(this.fragment.getSelection().getRange().from+1);}if(this.captionDocument.data.hasContent()){data=data.concat([{type:'mwGalleryCaption'},{type:'/mwGalleryCaption'}]);}for(i=0,ilen=items.
length;i<ilen;i++){data=data.concat(getImageLinearData.call(this,items[i]));}surfaceModel.change(ve.dm.TransactionBuilder.static.newFromReplacement(surfaceModelDocument,innerRange,data));captionInsertionOffset=innerRange.from+data.length-2;for(i=items.length-1;i>=0;i--){surfaceModel.change(ve.dm.TransactionBuilder.static.newFromDocumentInsertion(surfaceModel.getDocument(),captionInsertionOffset,items[i].captionDocument));captionInsertionOffset-=4;}if(this.captionDocument.data.hasContent()){surfaceModel.change(ve.dm.TransactionBuilder.static.newFromDocumentInsertion(surfaceModel.getDocument(),innerRange.from+1,this.captionDocument));}};ve.ui.MWGalleryDialog.prototype.updateMwData=function(mwData){var mode;mwData.body={};delete mwData.attrs.caption;if(this.modeDropdown.getMenu().findSelectedItem()){mode=this.modeDropdown.getMenu().findSelectedItem().getData();}mwData.attrs.mode=mode===this.defaults.mode?undefined:mode;mwData.attrs.widths=this.widthsInput.getValue()||undefined;mwData.
attrs.heights=this.heightsInput.getValue()||undefined;mwData.attrs.perrow=this.perrowInput.getValue()||undefined;mwData.attrs.showfilename=this.showFilenameCheckbox.isSelected()?'yes':undefined;mwData.attrs.class=this.classesInput.getValue()||undefined;mwData.attrs.style=this.stylesInput.getValue()||undefined;};ve.ui.windowFactory.register(ve.ui.MWGalleryDialog);ve.ui.MWGalleryDialogTool=function VeUiMWGalleryDialogTool(){ve.ui.MWGalleryDialogTool.super.apply(this,arguments);};OO.inheritClass(ve.ui.MWGalleryDialogTool,ve.ui.FragmentWindowTool);ve.ui.MWGalleryDialogTool.static.name='gallery';ve.ui.MWGalleryDialogTool.static.group='object';ve.ui.MWGalleryDialogTool.static.icon='imageGallery';ve.ui.MWGalleryDialogTool.static.title=OO.ui.deferMsg('visualeditor-mwgallerydialog-title');ve.ui.MWGalleryDialogTool.static.modelClasses=[ve.dm.MWGalleryNode];ve.ui.MWGalleryDialogTool.static.commandName='gallery';ve.ui.toolFactory.register(ve.ui.MWGalleryDialogTool);ve.ui.commandRegistry.register(
new ve.ui.Command('gallery','window','open',{args:['gallery'],supportedSelections:['linear']}));ve.ui.sequenceRegistry.register(new ve.ui.Sequence('wikitextGallery','gallery','<gallery',8));ve.ui.MWGalleryGroupWidget=function VeUiMWGalleryGroupWidget(config){config=config||{};ve.ui.MWGalleryGroupWidget.super.apply(this,arguments);OO.ui.mixin.DraggableGroupElement.call(this,$.extend({},config,{$group:this.$element}));this.aggregate({edit:'editItem'});};OO.inheritClass(ve.ui.MWGalleryGroupWidget,OO.ui.Widget);OO.mixinClass(ve.ui.MWGalleryGroupWidget,OO.ui.mixin.DraggableGroupElement);ve.ui.MWGalleryItemWidget=function VeUiMWGalleryItemWidget(imageInfo,config){this.resource=imageInfo.resource;this.altText=imageInfo.altText||'';this.src=imageInfo.src;this.height=imageInfo.height;this.width=imageInfo.width;this.thumbUrl=imageInfo.thumbUrl;this.captionDocument=imageInfo.captionDocument;this.highlighted=!1;this.tagName=imageInfo.tagName;config=config||{};ve.ui.MWGalleryItemWidget.super.
call(this,config);this.$element.addClass('ve-ui-mwGalleryDialog-image-container').addClass(config.isMobile?'ve-ui-mwGalleryDialog-image-container-mobile':'ve-ui-mwGalleryDialog-image-container-desktop').css('background-image','url('+this.thumbUrl+')');OO.ui.mixin.DraggableElement.call(this,ve.extendObject({$handle:this.$element},config));OO.ui.mixin.TabIndexedElement.call(this,config);this.$element.on({click:this.onItemClick.bind(this),keypress:this.onItemKeyPress.bind(this)});};OO.inheritClass(ve.ui.MWGalleryItemWidget,OO.ui.Widget);OO.mixinClass(ve.ui.MWGalleryItemWidget,OO.ui.mixin.DraggableElement);OO.mixinClass(ve.ui.MWGalleryItemWidget,OO.ui.mixin.TabIndexedElement);ve.ui.MWGalleryItemWidget.prototype.onItemClick=function(){this.emit('edit',this);};ve.ui.MWGalleryItemWidget.prototype.onItemKeyPress=function(e){if(e.which===OO.ui.Keys.ENTER){this.emit('edit',this);return!1;}};ve.ui.MWGalleryItemWidget.prototype.setCaptionDocument=function(captionDocument){this.captionDocument=
captionDocument;};ve.ui.MWGalleryItemWidget.prototype.setAltText=function(altText){this.altText=altText;};ve.ui.MWGalleryItemWidget.prototype.toggleHighlighted=function(highlighted){highlighted=highlighted!==undefined?highlighted:!this.highlighted;this.$element.toggleClass('ve-ui-mwGalleryDialog-image-container-highlighted',!!highlighted);};},{"css":[
".ve-ui-mwGalleryDialog .ve-ui-mwGalleryDialog-image-container{height:100px;background-repeat:no-repeat;background-position:50% 50%;border:1px solid #c8ccd1;cursor:pointer; background-size:contain;-webkit-transition:border 200ms cubic-bezier(0.39,0.575,0.565,1),box-shadow 200ms cubic-bezier(0.39,0.575,0.565,1);-moz-transition:border 200ms cubic-bezier(0.39,0.575,0.565,1),box-shadow 200ms cubic-bezier(0.39,0.575,0.565,1);transition:border 200ms cubic-bezier(0.39,0.575,0.565,1),box-shadow 200ms cubic-bezier(0.39,0.575,0.565,1);  padding:0}.ve-ui-mwGalleryDialog .ve-ui-mwGalleryDialog-image-container-desktop{width:100%;margin-bottom:0.5em}.ve-ui-mwGalleryDialog .ve-ui-mwGalleryDialog-image-container-mobile{width:100px;margin-right:0.5em}.ve-ui-mwGalleryDialog .ve-ui-mwGalleryDialog-image-container-highlighted{border-color:#36c;box-shadow:inset 0 0 0 0.1em #36c}.ve-ui-mwGalleryDialog .oo-ui-fieldsetLayout + .oo-ui-fieldsetLayout,.ve-ui-mwGalleryDialog-remove-button{margin-top:1em}.ve-ui-mwGalleryDialog-highlighted-image{background-color:#f8f9fa;width:100%; height:200px;background-repeat:no-repeat;background-position:50% 50%; background-size:contain}.ve-ui-mwGalleryDialog-menuLayout-desktop \u003E .oo-ui-menuLayout-menu{width:14em;border-right:1px solid #c8ccd1}.ve-ui-mwGalleryDialog-menuLayout-mobile \u003E .oo-ui-menuLayout-menu{ height:calc(102px + 2em);border-bottom:1px solid #c8ccd1}.ve-ui-mwGalleryDialog-menuLayout-desktop \u003E .oo-ui-menuLayout-content{left:14em;right:14em}.ve-ui-mwGalleryDialog-menuLayout-mobile \u003E .oo-ui-menuLayout-content{ top:calc(102px + 2em)}.ve-ui-mwGalleryDialog-imageListMenuLayout-desktop \u003E .oo-ui-menuLayout-content{bottom:5em}.ve-ui-mwGalleryDialog-imageListMenuLayout-mobile \u003E .oo-ui-menuLayout-content{right:4em;border-right:1px solid #eaecf0}.ve-ui-mwGalleryDialog-imageListMenuLayout-mobile \u003E .oo-ui-menuLayout-content \u003E .oo-ui-panelLayout-scrollable{overflow-y:hidden}.ve-ui-mwGalleryDialog-imageListMenuLayout \u003E .oo-ui-menuLayout-menu{text-align:center}.ve-ui-mwGalleryDialog-imageListMenuLayout-desktop \u003E .oo-ui-menuLayout-menu{box-shadow:0 -1px 0 0 rgba(0,0,0,0.05);height:5em;border-top:1px solid #eaecf0}.ve-ui-mwGalleryDialog-imageListMenuLayout-desktop \u003E .oo-ui-menuLayout-menu .oo-ui-panelLayout-padded{ padding:0 12px;line-height:5em}.ve-ui-mwGalleryDialog-imageListMenuLayout-desktop \u003E .oo-ui-menuLayout-menu .oo-ui-panelLayout-padded .oo-ui-buttonElement-button{white-space:normal}.ve-ui-mwGalleryDialog-imageListMenuLayout-mobile \u003E .oo-ui-menuLayout-menu{box-shadow:-1px 0 0 0 rgba(0,0,0,0.05);line-height:102px;width:4em}.ve-ui-mwGalleryDialog-imageListMenuLayout-mobile \u003E .oo-ui-menuLayout-menu \u003E .oo-ui-panelLayout-padded{padding:1em 0}.ve-ui-mwGalleryDialog-imageListMenuLayout-mobile \u003E .oo-ui-menuLayout-menu .oo-ui-buttonElement-frameless.oo-ui-iconElement:first-child{margin-left:0}.ve-ui-mwGalleryDialog-imageListMenuLayout .oo-ui-draggableGroupElement-horizontal{white-space:nowrap;line-height:0}"
]},{"visualeditor-dialog-media-alttext-section":"Alternative text","visualeditor-dialog-media-content-description-link":"(description page)","visualeditor-dialog-media-content-filename":"File name","visualeditor-dialog-media-content-section":"Caption","visualeditor-mwgallerycontext-description":"$1 {{PLURAL:$1|image|images}}","visualeditor-mwgallerydialog-caption-field-label":"Gallery caption","visualeditor-mwgallerydialog-caption-input-placeholder":"Caption for the whole gallery","visualeditor-mwgallerydialog-card-images":"Images","visualeditor-mwgallerydialog-card-options":"Options","visualeditor-mwgallerydialog-classes-field-label":"CSS classes","visualeditor-mwgallerydialog-classes-input-placeholder":"Class names, space-separated","visualeditor-mwgallerydialog-empty-gallery-message":"The gallery is empty.","visualeditor-mwgallerydialog-heights-field-label":"Image height","visualeditor-mwgallerydialog-heights-input-placeholder":"Default height: $1 px",
"visualeditor-mwgallerydialog-image-caption-placeholder":"Image caption","visualeditor-mwgallerydialog-mode-dropdown-label-nolines":"Traditional with no outlines","visualeditor-mwgallerydialog-mode-dropdown-label-packed":"Packed","visualeditor-mwgallerydialog-mode-dropdown-label-packed-hover":"Packed with captions on hover","visualeditor-mwgallerydialog-mode-dropdown-label-packed-overlay":"Packed with overlaid captions","visualeditor-mwgallerydialog-mode-dropdown-label-slideshow":"Slideshow","visualeditor-mwgallerydialog-mode-dropdown-label-traditional":"Traditional","visualeditor-mwgallerydialog-mode-field-label":"Display mode","visualeditor-mwgallerydialog-perrow-field-label":"Images per row","visualeditor-mwgallerydialog-remove-button-label":"Remove image","visualeditor-mwgallerydialog-search-button-label":"Add new image","visualeditor-mwgallerydialog-show-filename-field-label":"Show filenames","visualeditor-mwgallerydialog-styles-field-label":"CSS styles",
"visualeditor-mwgallerydialog-styles-input-placeholder":"CSS rules, semicolon-separated","visualeditor-mwgallerydialog-title":"Gallery","visualeditor-mwgallerydialog-widths-field-label":"Image width","visualeditor-mwgallerydialog-widths-input-placeholder":"Default width: $1 px"});