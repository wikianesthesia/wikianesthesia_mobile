mw.loader.implement("ext.visualEditor.mwlanguage@1g87s",function($,jQuery,require,module){ve.dm.MWLanguageVariantNode=function VeDmMWLanguageVariantNode(){ve.dm.MWLanguageVariantNode.super.apply(this,arguments);ve.dm.FocusableNode.call(this);};OO.inheritClass(ve.dm.MWLanguageVariantNode,ve.dm.LeafNode);OO.mixinClass(ve.dm.MWLanguageVariantNode,ve.dm.FocusableNode);ve.dm.MWLanguageVariantNode.static.name='mwLanguageVariant';ve.dm.MWLanguageVariantNode.static.matchTagNames=null;ve.dm.MWLanguageVariantNode.static.matchRdfaTypes=['mw:LanguageVariant'];ve.dm.MWLanguageVariantNode.static.getHashObject=function(dataElement){return{type:dataElement.type,variantInfo:dataElement.attributes.variantInfo};};ve.dm.MWLanguageVariantNode.static.inlineType='mwLanguageVariantInline';ve.dm.MWLanguageVariantNode.static.blockType='mwLanguageVariantBlock';ve.dm.MWLanguageVariantNode.static.hiddenType='mwLanguageVariantHidden';ve.dm.MWLanguageVariantNode.static.migrateFieldNames=function(dataMwv){if(dataMwv.
bidir){dataMwv.twoway=dataMwv.bidir;delete dataMwv.bidir;}if(dataMwv.unidir){dataMwv.oneway=dataMwv.unidir;delete dataMwv.unidir;}return dataMwv;};ve.dm.MWLanguageVariantNode.static.toDataElement=function(domElements,converter){var dataElement,isInline,firstElement=domElements[0],dataMwvJSON=firstElement.getAttribute('data-mw-variant'),dataMwv=dataMwvJSON?JSON.parse(dataMwvJSON):{};this.migrateFieldNames(dataMwv);dataElement={attributes:{variantInfo:dataMwv,originalVariantInfo:dataMwvJSON}};if(firstElement.tagName==='META'){dataElement.type=this.hiddenType;return dataElement;}isInline=this.isHybridInline(domElements,converter);dataElement.type=isInline?this.inlineType:this.blockType;return dataElement;};ve.dm.MWLanguageVariantNode.static.toDomElements=function(dataElement,doc,converter){var variantInfo=dataElement.attributes.variantInfo,tagName=this.matchTagNames[0],rdfaType=this.matchRdfaTypes[0],domElement=doc.createElement(tagName),dataMwvJSON=JSON.stringify(variantInfo);if(
dataElement.attributes.originalVariantInfo){if(OO.compare(this.migrateFieldNames(JSON.parse(dataElement.attributes.originalVariantInfo)),variantInfo)){dataMwvJSON=dataElement.attributes.originalVariantInfo;}}domElement.setAttribute('typeof',rdfaType);domElement.setAttribute('data-mw-variant',dataMwvJSON);if(converter.doesModeNeedRendering()&&tagName!=='META'){this.insertPreviewElements(domElement,variantInfo);}return[domElement];};ve.dm.MWLanguageVariantNode.static.processVariants=function(container,opts){var self=this;Array.prototype.forEach.call(container.querySelectorAll('[typeof="mw:LanguageVariant"]'),function(element){var dataMwvJSON=element.getAttribute('data-mw-variant');if(dataMwvJSON&&element.tagName!=='META'){self.insertPreviewElements(element,JSON.parse(dataMwvJSON),opts);}});};ve.dm.MWLanguageVariantNode.static.insertPreviewElements=function(element,variantInfo,opts){element.innerHTML=this.getPreviewHtml(variantInfo,opts);this.processVariants(element,opts);return element;}
;ve.dm.MWLanguageVariantNode.static.getPreviewHtml=function(variantInfo,opts){if(variantInfo.disabled){return variantInfo.disabled.t;}else if(variantInfo.name){return ve.init.platform.getLanguageName(variantInfo.name.t.toLowerCase());}else if(variantInfo.filter){return variantInfo.filter.t;}else if(variantInfo.describe||(opts&&opts.describeAll)){var html='';if(variantInfo.twoway&&variantInfo.twoway.length){variantInfo.twoway.forEach(function(item){html+=ve.init.platform.getLanguageName(item.l.toLowerCase())+':'+item.t+';';});}else if(variantInfo.oneway&&variantInfo.oneway.length){variantInfo.oneway.forEach(function(item){html+=item.f+'â‡’'+ve.init.platform.getLanguageName(item.l.toLowerCase())+':'+item.t+';';});}return html;}else{var languageIndex;if(variantInfo.twoway&&variantInfo.twoway.length){languageIndex=this.matchLanguage(variantInfo.twoway);return variantInfo.twoway[languageIndex].t;}else if(variantInfo.oneway&&variantInfo.oneway.length){languageIndex=this.matchLanguage(
variantInfo.oneway);return variantInfo.oneway[languageIndex].t;}}return'';};ve.dm.MWLanguageVariantNode.static.describeChanges=function(){return ve.msg('visualeditor-changedesc-mwlanguagevariant');};ve.dm.MWLanguageVariantNode.static.cloneElement=function(){var clone=ve.dm.MWLanguageVariantNode.super.static.cloneElement.apply(this,arguments);delete clone.attributes.originalVariantInfo;return clone;};ve.dm.MWLanguageVariantNode.static.matchLanguage=function(items){var userVariant=mw.config.get('wgUserVariant'),fallbacks=mw.config.get('wgVisualEditor').pageVariantFallbacks,languageCodes=(userVariant?[userVariant]:[]).concat(fallbacks||[]),code,i,j;for(j=0;j<languageCodes.length;j++){code=languageCodes[j].toLowerCase();for(i=0;i<items.length;i++){if(items[i].l==='*'||items[i].l.toLowerCase()===code){return i;}}}return 0;};ve.dm.MWLanguageVariantNode.prototype.getVariantInfo=function(){return this.element.attributes.variantInfo;};ve.dm.MWLanguageVariantNode.prototype.isHidden=function(){
return!1;};ve.dm.MWLanguageVariantNode.prototype.getRuleType=function(){return this.constructor.static.getRuleType(this.getVariantInfo());};ve.dm.MWLanguageVariantNode.static.getRuleType=function(variantInfo){if(variantInfo.disabled){return'disabled';}if(variantInfo.filter){return'filter';}if(variantInfo.name){return'name';}if(variantInfo.twoway){return'twoway';}if(variantInfo.oneway){return'oneway';}return'unknown';};ve.dm.MWLanguageVariantBlockNode=function VeDmMWLanguageVariantBlockNode(){ve.dm.MWLanguageVariantBlockNode.super.apply(this,arguments);};OO.inheritClass(ve.dm.MWLanguageVariantBlockNode,ve.dm.MWLanguageVariantNode);ve.dm.MWLanguageVariantBlockNode.static.matchTagNames=['div'];ve.dm.MWLanguageVariantBlockNode.static.name='mwLanguageVariantBlock';ve.dm.modelRegistry.register(ve.dm.MWLanguageVariantBlockNode);ve.dm.MWLanguageVariantHiddenNode=function VeDmMWLanguageVariantHiddenNode(){ve.dm.MWLanguageVariantHiddenNode.super.apply(this,arguments);};OO.inheritClass(ve.dm.
MWLanguageVariantHiddenNode,ve.dm.MWLanguageVariantNode);ve.dm.MWLanguageVariantHiddenNode.static.matchTagNames=['meta'];ve.dm.MWLanguageVariantHiddenNode.static.name='mwLanguageVariantHidden';ve.dm.MWLanguageVariantHiddenNode.static.isContent=!0;ve.dm.MWLanguageVariantHiddenNode.prototype.isHidden=function(){return!0;};ve.dm.modelRegistry.register(ve.dm.MWLanguageVariantHiddenNode);ve.dm.MWLanguageVariantInlineNode=function VeDmMWLanguageVariantInlineNode(){ve.dm.MWLanguageVariantInlineNode.super.apply(this,arguments);};OO.inheritClass(ve.dm.MWLanguageVariantInlineNode,ve.dm.MWLanguageVariantNode);ve.dm.MWLanguageVariantInlineNode.static.matchTagNames=['span'];ve.dm.MWLanguageVariantInlineNode.static.name='mwLanguageVariantInline';ve.dm.MWLanguageVariantInlineNode.static.isContent=!0;ve.dm.modelRegistry.register(ve.dm.MWLanguageVariantInlineNode);ve.ce.MWLanguageVariantNode=function VeCeMWLanguageVariantNode(model,config){ve.ce.MWLanguageVariantNode.super.call(this,model,config)
;ve.ce.FocusableNode.call(this,this.$element,config);this.$element.addClass('ve-ce-mwLanguageVariantNode');this.$holder=this.appendHolder();this.model.connect(this,{update:'onUpdate'});this.onUpdate();};OO.inheritClass(ve.ce.MWLanguageVariantNode,ve.ce.LeafNode);OO.mixinClass(ve.ce.MWLanguageVariantNode,ve.ce.FocusableNode);ve.ce.MWLanguageVariantNode.static.iconWhenInvisible='language';ve.ce.MWLanguageVariantNode.static.getDescription=function(model){var variantInfo=model.getVariantInfo(),messageKey='visualeditor-mwlanguagevariant-'+model.getRuleType(),languageCodes=[],languageString;if(variantInfo.name){languageCodes=[variantInfo.name.t];}else if(variantInfo.filter){languageCodes=variantInfo.filter.l;}else if(variantInfo.twoway){languageCodes=variantInfo.twoway.map(function(item){return item.l;});}else if(variantInfo.oneway){languageCodes=variantInfo.oneway.map(function(item){return item.l;});}languageString=languageCodes.map(function(code){return ve.init.platform.getLanguageName(
code.toLowerCase());}).join(ve.msg('comma-separator'));return ve.msg(messageKey,languageString);};ve.ce.MWLanguageVariantNode.prototype.onUpdate=function(){if(!this.model.isHidden()){this.model.constructor.static.insertPreviewElements(this.$holder[0],this.model.getVariantInfo());}this.updateInvisibleIconLabel();};ve.ce.MWLanguageVariantNode.prototype.getInvisibleIconLabel=function(){var $element,variantInfo=this.model.getVariantInfo();if(this.model.isHidden()){$element=$('<div>');this.model.constructor.static.insertPreviewElements($element[0],variantInfo);return $element.text().trim().replace(/\s+/,' ');}return null;};ve.ce.MWLanguageVariantNode.prototype.appendHolder=function(){var tagName=this.constructor.static.tagName,document=this.$element[0].ownerDocument,$holder=$(document.createElement(tagName));$holder.addClass('ve-ce-mwLanguageVariantNode-holder');this.$element.append($holder);return $holder;};ve.ce.MWLanguageVariantNode.prototype.hasRendering=function(){return!this.model.
isHidden();};ve.ce.MWLanguageVariantBlockNode=function VeCeMWLanguageVariantBlockNode(){ve.ce.MWLanguageVariantBlockNode.super.apply(this,arguments);};OO.inheritClass(ve.ce.MWLanguageVariantBlockNode,ve.ce.MWLanguageVariantNode);ve.ce.MWLanguageVariantBlockNode.static.name='mwLanguageVariantBlock';ve.ce.MWLanguageVariantBlockNode.static.tagName='div';ve.ce.nodeFactory.register(ve.ce.MWLanguageVariantBlockNode);ve.ce.MWLanguageVariantHiddenNode=function VeCeMWLanguageVariantHiddenNode(){ve.ce.MWLanguageVariantHiddenNode.super.apply(this,arguments);};OO.inheritClass(ve.ce.MWLanguageVariantHiddenNode,ve.ce.MWLanguageVariantNode);ve.ce.MWLanguageVariantHiddenNode.static.name='mwLanguageVariantHidden';ve.ce.MWLanguageVariantHiddenNode.static.tagName='span';ve.ce.MWLanguageVariantHiddenNode.prototype.appendHolder=function(){return null;};ve.ce.nodeFactory.register(ve.ce.MWLanguageVariantHiddenNode);ve.ce.MWLanguageVariantInlineNode=function VeCeMWLanguageVariantInlineNode(){ve.ce.
MWLanguageVariantInlineNode.super.apply(this,arguments);};OO.inheritClass(ve.ce.MWLanguageVariantInlineNode,ve.ce.MWLanguageVariantNode);ve.ce.MWLanguageVariantInlineNode.static.name='mwLanguageVariantInline';ve.ce.MWLanguageVariantInlineNode.static.tagName='span';ve.ce.nodeFactory.register(ve.ce.MWLanguageVariantInlineNode);ve.ui.MWLanguageVariantNodeContextItem=function VeUiMWLanguageVariantNodeContextItem(){ve.ui.MWLanguageVariantNodeContextItem.super.apply(this,arguments);this.$element.addClass('ve-ui-mwLanguageVariantNodeContextItem');};OO.inheritClass(ve.ui.MWLanguageVariantNodeContextItem,ve.ui.LinearContextItem);ve.ui.MWLanguageVariantNodeContextItem.static.name='mwLanguageVariant';ve.ui.MWLanguageVariantNodeContextItem.static.icon='language';ve.ui.MWLanguageVariantNodeContextItem.static.label=null;ve.ui.MWLanguageVariantNodeContextItem.static.modelClasses=[ve.dm.MWLanguageVariantBlockNode,ve.dm.MWLanguageVariantInlineNode,ve.dm.MWLanguageVariantHiddenNode];ve.ui.
MWLanguageVariantNodeContextItem.static.commandName='mwLanguageVariant';ve.ui.MWLanguageVariantNodeContextItem.prototype.setup=function(){var messageKey='visualeditor-mwlanguagevariantcontextitem-title-'+this.model.getRuleType();this.setLabel(OO.ui.deferMsg(messageKey));return ve.ui.MWLanguageVariantNodeContextItem.super.prototype.setup.call(this);};ve.ui.MWLanguageVariantNodeContextItem.prototype.renderBody=function(){var $body=this.$body,$table=$('<table>'),$header=$('<tr>'),variantInfo=this.model.getVariantInfo(),type=this.model.getRuleType(),isHidden=this.model.isHidden(),languageCodes;$table.addClass('ve-ui-mwLanguageVariantNodeContextItem-rule-table');$table.append($header);switch(type){case'filter':case'name':$header.append($('<th>').append(ve.msg('visualeditor-mwlanguagevariantcontextitem-rule-name-label'))).append($('<th>').append(ve.msg('visualeditor-mwlanguagevariantcontextitem-rule-code-label')));languageCodes=(type==='filter')?variantInfo.filter.l:[variantInfo.name.t];
languageCodes.forEach(function(code){var name=ve.init.platform.getLanguageName(code.toLowerCase());if(!name){name=ve.msg('visualeditor-mwlanguagevariantcontextitem-rule-invalid-language-label');}$table.append($('<tr>').append($('<td>').text(name).attr('lang',code)).append($('<td>').text(code)));});break;case'oneway':$header.append($('<th>').append(ve.msg('visualeditor-mwlanguagevariantcontextitem-rule-name-label'))).append($('<th>').append(ve.msg('visualeditor-mwlanguagevariantcontextitem-rule-code-label'))).append($('<th>').append(ve.msg('visualeditor-mwlanguagevariantcontextitem-rule-text-from-label'))).append($('<th>').append(ve.msg('visualeditor-mwlanguagevariantcontextitem-rule-text-to-label')));variantInfo.oneway.forEach(function(item){var $fromText=$('<td>').html(item.f),$toText=$('<td>').html(item.t),code=item.l,name=ve.init.platform.getLanguageName(code.toLowerCase());$table.append($('<tr>').append($('<td>').text(name).attr('lang',code)).append($('<td>').text(code)).append(
$fromText).append($toText));});break;case'twoway':$header.append($('<th>').append(ve.msg('visualeditor-mwlanguagevariantcontextitem-rule-name-label'))).append($('<th>').append(ve.msg('visualeditor-mwlanguagevariantcontextitem-rule-code-label'))).append($('<th>').append(ve.msg('visualeditor-mwlanguagevariantcontextitem-rule-text-twoway-label')));variantInfo.twoway.forEach(function(item){var code=item.l,name=ve.init.platform.getLanguageName(code.toLowerCase()),$text=$('<td>').html(item.t);ve.dm.MWLanguageVariantNode.static.processVariants($text[0],{showHidden:!0});$table.append($('<tr>').append($('<td>').text(name).attr('lang',code)).append($('<td>').text(code)).append($text));});break;default:break;}if($table.find('tr').length>1){ve.dm.MWLanguageVariantNode.static.processVariants($table[0],{showHidden:!0});$body.append($table);}['describe','title','hidden'].forEach(function(flag){var f=(flag==='hidden')?isHidden:variantInfo[flag];if(f){$body.append($('<p>').text(OO.ui.msg(
'visualeditor-mwlanguagevariantcontextitem-flag-'+flag)));}});};ve.ui.MWLanguageVariantNodeContextItem.prototype.getCommand=function(){var type=this.model.getRuleType(),cmdName=this.constructor.static.commandName+'-'+type;return this.context.getSurface().commandRegistry.lookup(cmdName);};ve.ui.contextItemFactory.register(ve.ui.MWLanguageVariantNodeContextItem);['disabled','filter','name','twoway','oneway'].forEach(function(type){ve.ui.commandRegistry.register(new ve.ui.Command('mwLanguageVariant-'+type,'window','open',{args:['mwLanguageVariant-'+type],supportedSelections:['linear']}));});ve.ui.MWLanguageVariantInspector=function VeUiMWLanguageVariantInspector(){ve.ui.MWLanguageVariantInspector.super.apply(this,arguments);};OO.inheritClass(ve.ui.MWLanguageVariantInspector,ve.ui.NodeInspector);ve.ui.MWLanguageVariantInspector.static.name='mwLanguageVariant-disabled';ve.ui.MWLanguageVariantInspector.static.title=OO.ui.deferMsg('visualeditor-mwlanguagevariantinspector-title-disabled');ve.
ui.MWLanguageVariantInspector.static.modelClasses=[ve.dm.MWLanguageVariantBlockNode,ve.dm.MWLanguageVariantInlineNode,ve.dm.MWLanguageVariantHiddenNode];ve.ui.MWLanguageVariantInspector.static.size='large';ve.ui.MWLanguageVariantInspector.static.actions=[{action:'remove',label:OO.ui.deferMsg('visualeditor-inspector-remove-tooltip'),flags:'destructive',modes:'edit'}].concat(ve.ui.MWLanguageVariantInspector.super.static.actions);ve.ui.MWLanguageVariantInspector.static.defaultVariantType='mwLanguageVariantInline';ve.ui.MWLanguageVariantInspector.static.includeCommands=null;ve.ui.MWLanguageVariantInspector.static.excludeCommands=['paragraph','heading1','heading2','heading3','heading4','heading5','heading6','preformatted','blockquote','tableCellHeader','tableCellData','bullet','bulletWrapOnce','number','numberWrapOnce','indent','outdent'];ve.ui.MWLanguageVariantInspector.static.getImportRules=function(){return ve.extendObject(ve.copy(ve.init.target.constructor.static.importRules),{});};ve.
ui.MWLanguageVariantInspector.prototype.getDefaultVariantInfo=null;ve.ui.MWLanguageVariantInspector.prototype.getContentFromInspector=null;ve.ui.MWLanguageVariantInspector.prototype.createTextTarget=function(placeholder){return ve.init.target.createTargetWidget({toolbarGroups:[],includeCommands:this.constructor.static.includeCommands,excludeCommands:this.constructor.static.excludeCommands,importRules:this.constructor.static.getImportRules(),inDialog:this.constructor.static.name,placeholder:placeholder||null});};ve.ui.MWLanguageVariantInspector.prototype.setupTextTargetDoc=function(textTarget,htmlString){var doc=this.variantNode.getDocument().newFromHtml(htmlString);textTarget.setDocument(doc);return doc;};ve.ui.MWLanguageVariantInspector.prototype.getHtmlForDoc=function(doc){var surface=new ve.dm.Surface(doc),targetHtmlDoc;try{surface.change(ve.dm.TransactionBuilder.static.newFromWrap(doc,new ve.Range(0,doc.data.countNonInternalElements()),[],[],[{type:'paragraph'}],[]));}catch(e){}
targetHtmlDoc=ve.dm.converter.getDomFromModel(doc);return ve.properInnerHtml(targetHtmlDoc.body);};ve.ui.MWLanguageVariantInspector.prototype.initialize=function(){ve.ui.MWLanguageVariantInspector.super.prototype.initialize.call(this);this.$content.addClass('ve-ui-mwLanguageVariantInspector-content');};ve.ui.MWLanguageVariantInspector.prototype.getActionProcess=function(action){if(action==='remove'||action==='insert'){return new OO.ui.Process(function(){this.close({action:action});},this);}return ve.ui.MWLanguageVariantInspector.super.prototype.getActionProcess.call(this,action);};ve.ui.MWLanguageVariantInspector.prototype.getSetupProcess=function(data){return ve.ui.MWLanguageVariantInspector.super.prototype.getSetupProcess.call(this,data).next(function(){this.getFragment().getSurface().pushStaging();this.variantNode=this.getSelectedNode();if(!this.variantNode){this.getFragment().insertContent([{type:this.constructor.static.defaultVariantType,attributes:{variantInfo:this.
getDefaultVariantInfo()}},{type:'/'+this.constructor.static.defaultVariantType}]).select();this.variantNode=this.getSelectedNode();}},this);};ve.ui.MWLanguageVariantInspector.prototype.getTeardownProcess=function(data){data=data||{};return ve.ui.MWLanguageVariantInspector.super.prototype.getTeardownProcess.call(this,data).first(function(){var surfaceModel=this.getFragment().getSurface(),newContent;if(data.action==='remove'){surfaceModel.popStaging();this.getFragment().removeContent();}else if(data.action==='done'){newContent=this.getContentFromInspector(ve.copy(this.variantNode.getVariantInfo()));if(newContent[0].type===this.variantNode.getType()){this.getFragment().changeAttributes({variantInfo:newContent[0].attributes.variantInfo});}else{this.getFragment().removeContent();this.getFragment().insertContent(newContent).select();this.variantNode=this.getSelectedNode();}surfaceModel.applyStaging();}else{surfaceModel.popStaging();}},this);};ve.ui.MWLanguageVariantDisabledInspector=function
VeUiMWLanguageVariantDisabledInspector(){ve.ui.MWLanguageVariantDisabledInspector.super.apply(this,arguments);};OO.inheritClass(ve.ui.MWLanguageVariantDisabledInspector,ve.ui.MWLanguageVariantInspector);ve.ui.MWLanguageVariantDisabledInspector.static.name='mwLanguageVariant-disabled';ve.ui.MWLanguageVariantDisabledInspector.static.title=OO.ui.deferMsg('visualeditor-mwlanguagevariantinspector-title-disabled');ve.ui.MWLanguageVariantDisabledInspector.prototype.initialize=function(){ve.ui.MWLanguageVariantDisabledInspector.super.prototype.initialize.call(this);this.textTarget=this.createTextTarget(OO.ui.msg('visualeditor-mwlanguagevariantinspector-disabled-placeholder'));this.form.$element.append(this.textTarget.$element);};ve.ui.MWLanguageVariantDisabledInspector.prototype.getDefaultVariantInfo=function(){return{disabled:{t:''}};};ve.ui.MWLanguageVariantDisabledInspector.prototype.getSetupProcess=function(data){return ve.ui.MWLanguageVariantDisabledInspector.super.prototype.
getSetupProcess.call(this,data).next(function(){var variantInfo=this.variantNode.getVariantInfo();this.textTargetDoc=this.setupTextTargetDoc(this.textTarget,variantInfo.disabled.t);},this);};ve.ui.MWLanguageVariantDisabledInspector.prototype.getContentFromInspector=function(variantInfo){var type=this.variantNode.getType();variantInfo.disabled.t=this.getHtmlForDoc(this.textTargetDoc);return[{type:type,attributes:{variantInfo:variantInfo}},{type:'/'+type}];};ve.ui.MWLanguageVariantDisabledInspector.prototype.getReadyProcess=function(data){return ve.ui.MWLanguageVariantDisabledInspector.super.prototype.getReadyProcess.call(this,data).next(function(){this.textTarget.focus();},this);};ve.ui.MWLanguageVariantDisabledInspector.prototype.getTeardownProcess=function(data){return ve.ui.MWLanguageVariantDisabledInspector.super.prototype.getTeardownProcess.call(this,data).next(function(){this.textTarget.clear();this.textTargetDoc=null;},this);};ve.ui.MWLanguageVariantNameInspector=function
VeUiMWLanguageVariantNameInspector(){ve.ui.MWLanguageVariantNameInspector.super.apply(this,arguments);};OO.inheritClass(ve.ui.MWLanguageVariantNameInspector,ve.ui.MWLanguageVariantInspector);ve.ui.MWLanguageVariantNameInspector.static.name='mwLanguageVariant-name';ve.ui.MWLanguageVariantNameInspector.static.title=OO.ui.deferMsg('visualeditor-mwlanguagevariantinspector-title-name');ve.ui.MWLanguageVariantNameInspector.prototype.initialize=function(){ve.ui.MWLanguageVariantNameInspector.super.prototype.initialize.call(this);this.languageInput=new ve.ui.LanguageInputWidget({dialogManager:this.manager.getSurface().getDialogs(),dirInput:'none'});this.form.$element.append(this.languageInput.$element);};ve.ui.MWLanguageVariantNameInspector.prototype.getDefaultVariantInfo=function(){return{name:{t:mw.config.get('wgUserVariant')||'en'}};};ve.ui.MWLanguageVariantNameInspector.prototype.getSetupProcess=function(data){return ve.ui.MWLanguageVariantNameInspector.super.prototype.getSetupProcess.call
(this,data).next(function(){var variantInfo=this.variantNode.getVariantInfo();this.languageInput.setLangAndDir(variantInfo.name.t,'auto');},this);};ve.ui.MWLanguageVariantNameInspector.prototype.getContentFromInspector=function(variantInfo){var type=this.variantNode.getType();variantInfo.name.t=this.languageInput.getLang();return[{type:type,attributes:{variantInfo:variantInfo}},{type:'/'+type}];};ve.ui.MWLanguageVariantFilterInspector=function VeUiMWLanguageVariantFilterInspector(){ve.ui.MWLanguageVariantFilterInspector.super.apply(this,arguments);};OO.inheritClass(ve.ui.MWLanguageVariantFilterInspector,ve.ui.MWLanguageVariantInspector);ve.ui.MWLanguageVariantFilterInspector.static.name='mwLanguageVariant-filter';ve.ui.MWLanguageVariantFilterInspector.static.title=OO.ui.deferMsg('visualeditor-mwlanguagevariantinspector-title-filter');ve.ui.MWLanguageVariantFilterInspector.prototype.initialize=function(){ve.ui.MWLanguageVariantFilterInspector.super.prototype.initialize.call(this);this.
textTarget=this.createTextTarget(OO.ui.msg('visualeditor-mwlanguagevariantinspector-filter-text-placeholder'));this.langWidget=new OO.ui.TagMultiselectWidget({allowArbitary:!1,allowDisplayInvalidTags:!0,allowedValues:ve.init.platform.getLanguageCodes().sort(),placeholder:OO.ui.msg('visualeditor-mwlanguagevariantinspector-filter-langs-placeholder'),icon:'language'});this.langWidget.createTagItemWidget=function(data,label){var name=ve.init.platform.getLanguageName(data.toLowerCase());label=label||(name?(name+' ('+data+')'):data);return OO.ui.TagMultiselectWidget.prototype.createTagItemWidget.call(this,data,label);};this.form.$element.append(new OO.ui.FieldLayout(this.langWidget,{align:'top',label:OO.ui.msg('visualeditor-mwlanguagevariantinspector-filter-langs-label')}).$element);this.form.$element.append(new OO.ui.FieldLayout(this.textTarget,{align:'top',label:OO.ui.msg('visualeditor-mwlanguagevariantinspector-filter-text-label')}).$element);};ve.ui.MWLanguageVariantFilterInspector.
prototype.getDefaultVariantInfo=function(){return{filter:{l:[mw.config.get('wgUserVariant')],t:''}};};ve.ui.MWLanguageVariantFilterInspector.prototype.getSetupProcess=function(data){return ve.ui.MWLanguageVariantFilterInspector.super.prototype.getSetupProcess.call(this,data).next(function(){var variantInfo=this.variantNode.getVariantInfo();this.textTargetDoc=this.setupTextTargetDoc(this.textTarget,variantInfo.filter.t);this.langWidget.setValue(variantInfo.filter.l);},this);};ve.ui.MWLanguageVariantFilterInspector.prototype.getContentFromInspector=function(variantInfo){var type=this.variantNode.getType();variantInfo.filter.t=this.getHtmlForDoc(this.textTargetDoc);variantInfo.filter.l=this.langWidget.getValue();return[{type:type,attributes:{variantInfo:variantInfo}},{type:'/'+type}];};ve.ui.MWLanguageVariantFilterInspector.prototype.getReadyProcess=function(data){return ve.ui.MWLanguageVariantFilterInspector.super.prototype.getReadyProcess.call(this,data).next(function(){this.textTarget.
focus();},this);};ve.ui.MWLanguageVariantFilterInspector.prototype.getTeardownProcess=function(data){return ve.ui.MWLanguageVariantFilterInspector.super.prototype.getTeardownProcess.call(this,data).next(function(){this.langWidget.clearInput();this.langWidget.clearItems();this.textTarget.clear();this.textTargetDoc=null;},this);};ve.ui.MWLanguageVariantTwoWayInspector=function VeUiMWLanguageVariantTwoWayInspector(){ve.ui.MWLanguageVariantTwoWayInspector.super.apply(this,arguments);};OO.inheritClass(ve.ui.MWLanguageVariantTwoWayInspector,ve.ui.MWLanguageVariantInspector);ve.ui.MWLanguageVariantTwoWayInspector.static.name='mwLanguageVariant-twoway';ve.ui.MWLanguageVariantTwoWayInspector.static.title=OO.ui.deferMsg('visualeditor-mwlanguagevariantinspector-title-twoway');ve.ui.MWLanguageVariantTwoWayInspector.prototype.initialize=function(){ve.ui.MWLanguageVariantTwoWayInspector.super.prototype.initialize.call(this);this.items=[];this.layout=new OO.ui.FieldsetLayout({});this.form.$element.
append(this.layout.$element);this.addButton=new OO.ui.ButtonInputWidget({label:OO.ui.msg('visualeditor-mwlanguagevariantinspector-twoway-add-button'),icon:'add'});this.form.$element.append(this.addButton.$element);this.addButton.connect(this,{click:'onAddButtonClick'});};ve.ui.MWLanguageVariantTwoWayInspector.prototype.getDefaultVariantInfo=function(){return{twoway:[{l:mw.config.get('wgUserVariant'),t:''}]};};ve.ui.MWLanguageVariantTwoWayInspector.prototype.getSetupProcess=function(data){return ve.ui.MWLanguageVariantTwoWayInspector.super.prototype.getSetupProcess.call(this,data).next(function(){var variantInfo=this.variantNode.getVariantInfo();this.layout.clearItems();this.items=[];variantInfo.twoway.forEach(function(tw,idx){this.items[idx]=this.createItem(tw.l,tw.t);this.layout.addItems([this.items[idx].layout]);},this);},this);};ve.ui.MWLanguageVariantTwoWayInspector.prototype.createItem=function(lang,content){var languageInput,textTarget,clearButton,layout,item;languageInput=new ve
.ui.LanguageInputWidget({dialogManager:this.manager.getSurface().getDialogs(),dirInput:'none'});textTarget=this.createTextTarget(OO.ui.msg('visualeditor-mwlanguagevariantinspector-twoway-text-placeholder'));clearButton=new OO.ui.ButtonInputWidget({icon:'clear',title:OO.ui.deferMsg('visualeditor-mwlanguagevariantinspector-twoway-clear-button'),framed:!1});layout=new OO.ui.FieldLayout(new OO.ui.Widget({content:[new OO.ui.ActionFieldLayout(languageInput,clearButton),textTarget]}),{});item={languageInput:languageInput,textTarget:textTarget,clearButton:clearButton,layout:layout};item.textTargetDoc=this.setupTextTargetDoc(textTarget,content);languageInput.setLangAndDir(lang,'auto');clearButton.connect(this,{click:['onClearButtonClick',item]});return item;};ve.ui.MWLanguageVariantTwoWayInspector.prototype.getContentFromInspector=function(variantInfo){var type=this.variantNode.getType();variantInfo.twoway=this.items.map(function(item){return{l:item.languageInput.getLang(),t:this.
getHtmlForDoc(item.textTargetDoc)};},this);return[{type:type,attributes:{variantInfo:variantInfo}},{type:'/'+type}];};ve.ui.MWLanguageVariantTwoWayInspector.prototype.onAddButtonClick=function(){var idx=this.items.length;this.items[idx]=this.createItem(mw.config.get('wgUserVariant'),'');this.layout.addItems([this.items[idx].layout]);};ve.ui.MWLanguageVariantTwoWayInspector.prototype.onClearButtonClick=function(item){var idx=this.items.indexOf(item);this.items.splice(idx,1);this.layout.removeItems([item.layout]);item.clearButton.disconnect(this);};ve.ui.MWLanguageVariantOneWayInspector=function VeUiMWLanguageVariantOneWayInspector(){ve.ui.MWLanguageVariantOneWayInspector.super.apply(this,arguments);};OO.inheritClass(ve.ui.MWLanguageVariantOneWayInspector,ve.ui.MWLanguageVariantInspector);ve.ui.MWLanguageVariantOneWayInspector.static.name='mwLanguageVariant-oneway';ve.ui.MWLanguageVariantOneWayInspector.static.title=OO.ui.deferMsg('visualeditor-mwlanguagevariantinspector-title-oneway');
ve.ui.MWLanguageVariantOneWayInspector.prototype.initialize=function(){ve.ui.MWLanguageVariantOneWayInspector.super.prototype.initialize.call(this);this.items=[];this.layout=new OO.ui.FieldsetLayout({});this.form.$element.append(this.layout.$element);this.addButton=new OO.ui.ButtonInputWidget({label:OO.ui.msg('visualeditor-mwlanguagevariantinspector-oneway-add-button'),icon:'add'});this.form.$element.append(this.addButton.$element);this.addButton.connect(this,{click:'onAddButtonClick'});};ve.ui.MWLanguageVariantOneWayInspector.prototype.getDefaultVariantInfo=function(){return{oneway:[{f:'',l:mw.config.get('wgUserVariant'),t:''}]};};ve.ui.MWLanguageVariantOneWayInspector.prototype.getSetupProcess=function(data){return ve.ui.MWLanguageVariantOneWayInspector.super.prototype.getSetupProcess.call(this,data).next(function(){var variantInfo=this.variantNode.getVariantInfo();this.layout.clearItems();this.items=[];variantInfo.oneway.forEach(function(ow,idx){this.items[idx]=this.createItem(ow.f,
ow.l,ow.t);this.layout.addItems([this.items[idx].layout]);},this);},this);};ve.ui.MWLanguageVariantOneWayInspector.prototype.createItem=function(from,lang,to){var fromTextTarget,languageInput,toTextTarget,clearButton,layout,item;fromTextTarget=this.createTextTarget(OO.ui.msg('visualeditor-mwlanguagevariantinspector-oneway-from-text-placeholder'));languageInput=new ve.ui.LanguageInputWidget({dialogManager:this.manager.getSurface().getDialogs(),dirInput:'none'});toTextTarget=this.createTextTarget(OO.ui.msg('visualeditor-mwlanguagevariantinspector-oneway-to-text-placeholder'));clearButton=new OO.ui.ButtonInputWidget({icon:'clear',title:OO.ui.deferMsg('visualeditor-mwlanguagevariantinspector-oneway-clear-button'),framed:!1});layout=new OO.ui.FieldLayout(new OO.ui.Widget({content:[new OO.ui.ActionFieldLayout(fromTextTarget,clearButton),languageInput,toTextTarget]}),{});item={fromTextTarget:fromTextTarget,languageInput:languageInput,toTextTarget:toTextTarget,clearButton:clearButton,layout
:layout};item.fromTextTargetDoc=this.setupTextTargetDoc(fromTextTarget,from);item.toTextTargetDoc=this.setupTextTargetDoc(toTextTarget,to);languageInput.setLangAndDir(lang,'auto');clearButton.connect(this,{click:['onClearButtonClick',item]});return item;};ve.ui.MWLanguageVariantOneWayInspector.prototype.getContentFromInspector=function(variantInfo){var type=this.variantNode.getType();variantInfo.oneway=this.items.map(function(item){return{f:this.getHtmlForDoc(item.fromTextTargetDoc),l:item.languageInput.getLang(),t:this.getHtmlForDoc(item.toTextTargetDoc)};},this);return[{type:type,attributes:{variantInfo:variantInfo}},{type:'/'+type}];};ve.ui.MWLanguageVariantOneWayInspector.prototype.onAddButtonClick=function(){var idx=this.items.length;this.items[idx]=this.createItem('',mw.config.get('wgUserVariant'),'');this.layout.addItems([this.items[idx].layout]);};ve.ui.MWLanguageVariantOneWayInspector.prototype.onClearButtonClick=function(item){var idx=this.items.indexOf(item);this.items.
splice(idx,1);this.layout.removeItems([item.layout]);item.clearButton.disconnect(this);};ve.ui.windowFactory.register(ve.ui.MWLanguageVariantDisabledInspector);ve.ui.windowFactory.register(ve.ui.MWLanguageVariantNameInspector);ve.ui.windowFactory.register(ve.ui.MWLanguageVariantFilterInspector);ve.ui.windowFactory.register(ve.ui.MWLanguageVariantTwoWayInspector);ve.ui.windowFactory.register(ve.ui.MWLanguageVariantOneWayInspector);},{"css":[
".ve-ui-mwLanguageVariantNodeContextItem-rule-table{width:100%;border:0;border-collapse:collapse}.ve-ui-mwLanguageVariantNodeContextItem-rule-table th{white-space:nowrap;border-bottom:1px solid #c8ccd1;text-align:left}.ve-ui-mwLanguageVariantNodeContextItem-rule-table th,.ve-ui-mwLanguageVariantNodeContextItem-rule-table td{padding:0.75em 1em;border-bottom:1px solid #fff}.ve-ui-mwLanguageVariantNodeContextItem-rule-table tr:nth-child(odd) td{background:#eaecf0}.ve-ui-mwLanguageVariantNodeContextItem-rule-table tr:nth-child(even) td{background:#f8f9fa}"]},{"visualeditor-changedesc-mwlanguagevariant":"Language variant markup changed","visualeditor-mwlanguagevariant-disabled":"Variant conversion disabled","visualeditor-mwlanguagevariant-filter":"Variants filtered to $1","visualeditor-mwlanguagevariant-name":"Language name: $1","visualeditor-mwlanguagevariant-oneway":"One-way conversion: $1","visualeditor-mwlanguagevariant-twoway":"Language conversion: $1",
"visualeditor-mwlanguagevariant-unknown":"Language variant","visualeditor-mwlanguagevariantcontextitem-flag-describe":"This is a described rule.","visualeditor-mwlanguagevariantcontextitem-flag-hidden":"This is a hidden rule.","visualeditor-mwlanguagevariantcontextitem-flag-title":"This rule affects the page title.","visualeditor-mwlanguagevariantcontextitem-rule-code-label":"Language code","visualeditor-mwlanguagevariantcontextitem-rule-invalid-language-label":"\u003CInvalid\u003E","visualeditor-mwlanguagevariantcontextitem-rule-name-label":"Language","visualeditor-mwlanguagevariantcontextitem-rule-text-from-label":"Source","visualeditor-mwlanguagevariantcontextitem-rule-text-to-label":"Destination","visualeditor-mwlanguagevariantcontextitem-rule-text-twoway-label":"Text","visualeditor-mwlanguagevariantcontextitem-title-disabled":"Variant conversion disabled","visualeditor-mwlanguagevariantcontextitem-title-filter":"Variant filter",
"visualeditor-mwlanguagevariantcontextitem-title-name":"Language name","visualeditor-mwlanguagevariantcontextitem-title-oneway":"One-way conversion rule","visualeditor-mwlanguagevariantcontextitem-title-twoway":"Language conversion rule","visualeditor-mwlanguagevariantcontextitem-title-unknown":"Language variant","visualeditor-mwlanguagevariantinspector-disabled-placeholder":"Text protected from variant conversion","visualeditor-mwlanguagevariantinspector-filter-langs-label":"Languages","visualeditor-mwlanguagevariantinspector-filter-langs-placeholder":"Language code","visualeditor-mwlanguagevariantinspector-filter-text-label":"Contents","visualeditor-mwlanguagevariantinspector-filter-text-placeholder":"Filtered text","visualeditor-mwlanguagevariantinspector-oneway-add-button":"Add new case","visualeditor-mwlanguagevariantinspector-oneway-clear-button":"Remove case","visualeditor-mwlanguagevariantinspector-oneway-from-text-placeholder":"Source text",
"visualeditor-mwlanguagevariantinspector-oneway-to-text-placeholder":"Variant text","visualeditor-mwlanguagevariantinspector-title-disabled":"Variant conversion disabled","visualeditor-mwlanguagevariantinspector-title-filter":"Variant filter","visualeditor-mwlanguagevariantinspector-title-name":"Language name","visualeditor-mwlanguagevariantinspector-title-oneway":"One-way conversion rule","visualeditor-mwlanguagevariantinspector-title-twoway":"Language conversion rule","visualeditor-mwlanguagevariantinspector-twoway-add-button":"Add new case","visualeditor-mwlanguagevariantinspector-twoway-clear-button":"Remove case","visualeditor-mwlanguagevariantinspector-twoway-text-placeholder":"Variant text"});